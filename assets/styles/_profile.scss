// ═══════════════════════════════════════════════════
// Profile - AniList-inspired design
// ═══════════════════════════════════════════════════

// Status colors (AniList palette)
$status-en_cours:  #3498db;
$status-termine:   #2ecc71;
$status-en_pause:  #f39c12;
$status-backlog:   #9b59b6;
$status-abandonne: #e74c3c;

// ── Banner ──
.profile-banner {
    position: relative;
    height: 250px;
    margin: (-$spacing-xl) (-$spacing-xl) 0;
    background: linear-gradient(135deg, $color-bg-secondary 0%, darken($color-accent, 25%) 50%, $color-bg-secondary 100%);
    overflow: hidden;

    &__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    &__overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 120px;
        background: linear-gradient(to top, $color-bg-primary, transparent);
    }
}

// ── Hero (Avatar + Info) ──
.profile-hero {
    display: flex;
    align-items: flex-end;
    gap: $spacing-lg;
    margin-top: -60px;
    margin-bottom: $spacing-xl;
    position: relative;
    z-index: 1;
    padding: 0 $spacing-md;

    &__avatar {
        width: 120px;
        height: 120px;
        border-radius: $radius-lg;
        overflow: hidden;
        flex-shrink: 0;
        border: 4px solid $color-bg-primary;
        background-color: $color-bg-secondary;
        box-shadow: $shadow-lg;
        display: flex;
        align-items: center;
        justify-content: center;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        span {
            font-size: 2.5rem;
            font-weight: 700;
            color: $color-accent;
        }
    }

    &__info {
        flex: 1;
        padding-bottom: $spacing-xs;
    }

    &__top {
        display: flex;
        align-items: center;
        gap: $spacing-md;
        flex-wrap: wrap;
    }

    &__name {
        font-size: $font-size-xl;
        font-weight: 700;
        font-family: $font-family-heading;
    }

    &__bio {
        margin-top: $spacing-xs;
        font-size: $font-size-sm;
        color: $color-text-secondary;
        line-height: 1.5;
    }

    &__joined {
        margin-top: $spacing-xs;
        font-size: $font-size-sm;
        color: $color-text-muted;
    }
}

// ── Stats Bar (horizontal row like AniList overview) ──
.profile-stats-bar {
    display: flex;
    justify-content: space-around;
    background-color: $color-bg-card;
    border-radius: $radius-lg;
    padding: $spacing-lg $spacing-md;
    margin-bottom: $spacing-lg;

    &__item {
        text-align: center;
        padding: 0 $spacing-md;
    }

    &__value {
        display: block;
        font-size: $font-size-xl;
        font-weight: 700;
        color: $color-accent;
        font-family: $font-family-heading;

        small {
            font-size: $font-size-sm;
            font-weight: 400;
            color: $color-text-muted;
        }
    }

    &__label {
        display: block;
        font-size: 0.75rem;
        color: $color-text-muted;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-top: 2px;
    }
}

// ── Status Segment Bar (colored bar like AniList) ──
.status-segment {
    margin-bottom: $spacing-xl;

    &__bar {
        display: flex;
        height: 12px;
        border-radius: $radius-pill;
        overflow: hidden;
        background-color: rgba(255, 255, 255, 0.05);
    }

    &__fill {
        height: 100%;
        min-width: 4px;
        transition: width 0.4s ease;

        &--en_cours   { background-color: $status-en_cours; }
        &--termine    { background-color: $status-termine; }
        &--en_pause   { background-color: $status-en_pause; }
        &--backlog    { background-color: $status-backlog; }
        &--abandonne  { background-color: $status-abandonne; }
    }

    &__legend {
        display: flex;
        gap: $spacing-lg;
        margin-top: $spacing-sm;
        justify-content: center;
        flex-wrap: wrap;
    }

    &__item {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: $font-size-sm;
        color: $color-text-secondary;
    }

    &__dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;

        &--en_cours   { background-color: $status-en_cours; }
        &--termine    { background-color: $status-termine; }
        &--en_pause   { background-color: $status-en_pause; }
        &--backlog    { background-color: $status-backlog; }
        &--abandonne  { background-color: $status-abandonne; }
    }
}

// ── Profile Sections ──
.profile-section {
    margin-bottom: $spacing-xl;

    &__title {
        font-size: $font-size-lg;
        font-weight: 600;
        margin-bottom: $spacing-md;
        padding-bottom: $spacing-sm;
        border-bottom: 2px solid rgba(255, 255, 255, 0.05);
    }
}

// ── Game Cards (for Currently Playing / Favorites) ──
.profile-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: $spacing-md;

    &--wide {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    }
}

.profile-game-card {
    position: relative;
    border-radius: $radius-md;
    overflow: hidden;
    aspect-ratio: 3 / 4;
    display: block;
    background-color: $color-bg-secondary;
    transition: transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);

        .profile-game-card__overlay {
            opacity: 1;
        }
    }

    &__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    &__placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        background-color: $color-bg-card;
    }

    &__overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: $spacing-sm;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.85) 0%, transparent 100%);
        opacity: 0;
        transition: opacity 0.2s ease;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        min-height: 50%;
    }

    &__title {
        font-size: 0.8rem;
        font-weight: 600;
        color: #fff;
        line-height: 1.3;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    &__progress,
    &__rating {
        font-size: 0.7rem;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 2px;
    }

    &__rating {
        color: $color-star;
        font-weight: 600;
    }
}

// ── Distribution Cards (Genre / Platform) ──
.profile-distributions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: $spacing-lg;
    margin-bottom: $spacing-xl;
}

.profile-distrib-card {
    background-color: $color-bg-card;
    border-radius: $radius-lg;
    padding: $spacing-lg;

    &__title {
        font-size: $font-size-base;
        font-weight: 600;
        margin-bottom: $spacing-md;
        color: $color-text-primary;
    }

    &__row {
        display: flex;
        align-items: center;
        gap: $spacing-sm;
        margin-bottom: $spacing-sm;
    }

    &__label {
        min-width: 90px;
        font-size: $font-size-sm;
        color: $color-text-secondary;
    }

    &__track {
        flex: 1;
        height: 6px;
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: $radius-pill;
        overflow: hidden;
    }

    &__fill {
        height: 100%;
        background-color: $color-accent;
        border-radius: $radius-pill;
        transition: width 0.3s ease;
    }

    &__count {
        min-width: 24px;
        font-size: $font-size-sm;
        color: $color-text-muted;
        text-align: right;
    }
}

// ── User Search: Cards Grid ──
.user-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: $spacing-md;
}

.user-card {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    background-color: $color-bg-card;
    border-radius: $radius-lg;
    padding: $spacing-lg;
    text-decoration: none;
    color: $color-text-primary;
    transition: transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    &__avatar {
        width: 56px;
        height: 56px;
        border-radius: $radius-md;
        overflow: hidden;
        flex-shrink: 0;
        border: 2px solid $color-accent;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: $color-bg-secondary;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        span {
            font-size: 1.4rem;
            font-weight: 700;
            color: $color-accent;
        }
    }

    &__info {
        flex: 1;
        min-width: 0;
    }

    &__name {
        font-size: $font-size-base;
        font-weight: 600;
        margin-bottom: 2px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    &__joined {
        font-size: $font-size-sm;
        color: $color-text-muted;
    }
}

// ── Responsive ──
@media (max-width: $breakpoint-md) {
    .profile-banner {
        height: 160px;
    }

    .profile-hero {
        flex-direction: column;
        align-items: center;
        text-align: center;
        margin-top: -50px;

        &__avatar {
            width: 100px;
            height: 100px;
        }

        &__top {
            justify-content: center;
        }
    }

    .profile-stats-bar {
        flex-wrap: wrap;
        gap: $spacing-md;

        &__item {
            flex: 1 0 30%;
        }
    }

    .profile-cards {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    }

    .profile-distributions {
        grid-template-columns: 1fr;
    }
}
